# üë®‚Äçüç≥ POO pour Cuisiniers - Cours 06 : Public, Private, Protected (prot√©ger ses recettes secr√®tes !)

## üç≥ Salut le chef !

Jusqu`√† maintenant, toutes tes propri√©t√©s √©taient **`public`**.

√áa veut dire que **N`IMPORTE QUI** peut les modifier :

```php
$recette->temps_cuisson = 35;
$recette->temps_cuisson = -10; // PROBL√àME ! Un temps n√©gatif ?!
```

**C`est dangereux !** üò±

Aujourd`hui, tu vas apprendre √† **PROT√âGER** tes propri√©t√©s pour √©viter que n`importe qui fasse n`importe quoi avec tes recettes !

C`est ce qu`on appelle **l`encapsulation**. üîí

---

## ü§î C`est quoi le probl√®me avec `public` ?

Regarde ce code :

```php
<?php
class Recette {
    public $nom;
    public $temps_cuisson;
    public $temperature;
    public $portions;

    public function __construct($n, $t, $temp, $p) {
        $this->nom = $n;
        $this->temps_cuisson = $t;
        $this->temperature = $temp;
        $this->portions = $p;
    }
}

$gateau = new Recette("G√¢teau au chocolat", 35, 180, 8);

// Quelqu'un peut faire des B√äTISES !
$gateau->temps_cuisson = -20; // Un temps n√©gatif ?!
$gateau->portions = 0; // Z√©ro portion ?!
$gateau->temperature = 1000; // 1000¬∞C ?!

echo "Temps de cuisson : " . $gateau->temps_cuisson . " min<br>";
?>
```

---

### üì∫ R√©sultat :

```
Temps de cuisson : -20 min
```

**UN TEMPS DE CUISSON DE -20 MINUTES ?!** ü§Ø

√áa n`a **AUCUN SENS** !

**Le probl√®me** : Avec `public`, n`importe qui peut mettre n`importe quoi !

---

## üîí Les 3 niveaux de protection

En POO, tu as **3 mots-cl√©s** pour prot√©ger tes propri√©t√©s et m√©thodes :

| Mot-cl√© | Visibilit√© | Qui peut y acc√©der ? |
|---------|------------|----------------------|
| **`public`** | üåç Partout | Tout le monde |
| **`private`** | üîí Priv√© | Seulement la classe elle-m√™me |
| **`protected`** | üë®‚Äçüç≥ Prot√©g√© | La classe + les classes enfants |

---

### üåç `public` - Accessible partout

```php
class Recette {
    public $nom; // Tout le monde peut lire et modifier
}

$recette = new Recette();
$recette->nom = "G√¢teau"; // ‚úÖ OK
```

**Utilise `public` pour :** Les choses qui peuvent √™tre librement modifi√©es sans danger.

---

### üîí `private` - Accessible SEULEMENT dans la classe

```php
class Recette {
    private $temps_cuisson; // Personne ne peut y acc√©der de l'ext√©rieur
}

$recette = new Recette();
$recette->temps_cuisson = 35; // ‚ùå ERREUR ! PHP va r√¢ler
```

**Utilise `private` pour :** Les donn√©es sensibles qu`on doit prot√©ger.

---

### üë®‚Äçüç≥ `protected` - Accessible dans la classe + les enfants

```php
class Recette {
    protected $temps_cuisson; // La classe + les classes enfants peuvent y acc√©der
}

class Dessert extends Recette {
    public function afficherTemps() {
        echo $this->temps_cuisson; // ‚úÖ OK, je suis un enfant
    }
}

$recette = new Dessert();
$recette->temps_cuisson = 35; // ‚ùå ERREUR ! Pas accessible de l'ext√©rieur
```

**Utilise `protected` pour :** Les donn√©es partag√©es avec les classes enfants, mais pas avec l`ext√©rieur.

---

## üõ°Ô∏è Exemple avec `private`

```php
<?php
class Recette {
    private $nom;
    private $temps_cuisson;
    private $temperature;
    private $portions;

    public function __construct($n, $t, $temp, $p) {
        $this->nom = $n;
        $this->temps_cuisson = $t;
        $this->temperature = $temp;
        $this->portions = $p;
    }

    public function calculerTempsTotal() {
        return $this->temps_cuisson;
    }
}

$gateau = new Recette("G√¢teau au chocolat", 35, 180, 8);

echo $gateau->calculerTempsTotal(); // ‚úÖ OK : 35

echo $gateau->temps_cuisson; // ‚ùå ERREUR ! temps_cuisson est private
?>
```

**Maintenant, personne ne peut modifier directement le temps de cuisson !**

Mais... **comment on fait pour lire ou modifier les propri√©t√©s alors ?** ü§î

---

## üîë Les GETTERS et SETTERS (les gardiens de la cuisine)

Les **getters** et **setters** sont des **m√©thodes** qui permettent de :
- **LIRE** (get) une propri√©t√© priv√©e
- **MODIFIER** (set) une propri√©t√© priv√©e **avec des contr√¥les**

---

### Exemple complet avec getters et setters

```php
<?php
class Recette {
    private $nom;
    private $temps_cuisson;
    private $temperature;
    private $portions;

    public function __construct($n, $t, $temp, $p) {
        $this->setNom($n); // J'utilise le setter pour contr√¥ler
        $this->setTempsCuisson($t);
        $this->setTemperature($temp);
        $this->setPortions($p);
    }

    // GETTER : lire le nom
    public function getNom() {
        return $this->nom;
    }

    // SETTER : modifier le nom (avec CONTR√îLE !)
    public function setNom($n) {
        if (empty($n)) {
            echo "‚ö†Ô∏è ERREUR : Le nom ne peut pas √™tre vide !<br>";
            return;
        }
        $this->nom = $n;
    }

    // GETTER : lire le temps de cuisson
    public function getTempsCuisson() {
        return $this->temps_cuisson;
    }

    // SETTER : modifier le temps de cuisson (avec CONTR√îLE !)
    public function setTempsCuisson($t) {
        if ($t < 0) {
            echo "‚ö†Ô∏è ERREUR : Le temps de cuisson ne peut pas √™tre n√©gatif !<br>";
            return;
        }
        $this->temps_cuisson = $t;
    }

    // GETTER : lire la temp√©rature
    public function getTemperature() {
        return $this->temperature;
    }

    // SETTER : modifier la temp√©rature (avec CONTR√îLE !)
    public function setTemperature($temp) {
        if ($temp < 0 || $temp > 300) {
            echo "‚ö†Ô∏è ERREUR : Temp√©rature invalide (0-300¬∞C) !<br>";
            return;
        }
        $this->temperature = $temp;
    }

    // GETTER : lire les portions
    public function getPortions() {
        return $this->portions;
    }

    // SETTER : modifier les portions (avec CONTR√îLE !)
    public function setPortions($p) {
        if ($p <= 0) {
            echo "‚ö†Ô∏è ERREUR : Il faut au moins 1 portion !<br>";
            return;
        }
        $this->portions = $p;
    }

    public function afficherInfo() {
        echo "Recette : " . $this->nom . " (" . $this->temps_cuisson . " min, ";
        echo $this->temperature . "¬∞C, " . $this->portions . " portions)<br>";
    }
}

// Utilisation
$gateau = new Recette("G√¢teau au chocolat", 35, 180, 8);
$gateau->afficherInfo();

echo "Temps de cuisson : " . $gateau->getTempsCuisson() . " min<br>";

// Essayons de mettre des valeurs incorrectes
$gateau->setTempsCuisson(-20); // ‚ö†Ô∏è Bloqu√© !
$gateau->setPortions(0); // ‚ö†Ô∏è Bloqu√© !
$gateau->setTemperature(500); // ‚ö†Ô∏è Bloqu√© !

// Valeur correcte
$gateau->setTempsCuisson(40); // ‚úÖ OK
$gateau->afficherInfo();
?>
```

---

### üì∫ R√©sultat :

```
Recette : G√¢teau au chocolat (35 min, 180¬∞C, 8 portions)
Temps de cuisson : 35 min
‚ö†Ô∏è ERREUR : Le temps de cuisson ne peut pas √™tre n√©gatif !
‚ö†Ô∏è ERREUR : Il faut au moins 1 portion !
‚ö†Ô∏è ERREUR : Temp√©rature invalide (0-300¬∞C) !
Recette : G√¢teau au chocolat (40 min, 180¬∞C, 8 portions)
```

**Maintenant, les donn√©es sont PROT√âG√âES !** üõ°Ô∏è

---

## üîç D√©cortiquons les getters et setters

### Structure d`un GETTER

```php
public function getNom() {
    return $this->nom;
}
```

**`public`** ‚Üí Accessible de partout (c`est une porte d`acc√®s)

**`function getNom()`** ‚Üí Nom : **get** + **Nom de la propri√©t√©** (convention)

**`return $this->nom;`** ‚Üí Je **renvoie** la valeur de la propri√©t√© priv√©e

**Traduction :** *"Donne-moi le nom de la recette"*

---

### Structure d`un SETTER

```php
public function setTempsCuisson($t) {
    if ($t < 0) {
        echo "‚ö†Ô∏è ERREUR : Le temps de cuisson ne peut pas √™tre n√©gatif !<br>";
        return;
    }
    $this->temps_cuisson = $t;
}
```

**`public`** ‚Üí Accessible de partout

**`function setTempsCuisson($t)`** ‚Üí Nom : **set** + **Nom de la propri√©t√©** + **param√®tre**

**`if ($t < 0) { ... }`** ‚Üí **CONTR√îLE** de la valeur avant de l`accepter

**`$this->temps_cuisson = $t;`** ‚Üí Si c`est bon, je modifie la propri√©t√©

**Traduction :** *"Change le temps de cuisson, mais seulement si la valeur est correcte"*

---

## üí° Pourquoi c`est G√âNIAL

### ‚úÖ Avantage 1 : S√©curit√©

Tu emp√™ches les valeurs **absurdes** :
- Temps de cuisson n√©gatif
- Portions nulles
- Temp√©rature impossible

---

### ‚úÖ Avantage 2 : Contr√¥le

Tu peux ajouter des **r√®gles m√©tier** :

```php
public function setTempsCuisson($t) {
    if ($t > 300) {
        echo "‚ö†Ô∏è Attention : Temps de cuisson tr√®s long !<br>";
    }
    $this->temps_cuisson = $t;
}
```

---

### ‚úÖ Avantage 3 : √âvolution

Si tu changes la structure interne, le code ext√©rieur ne casse pas :

```php
// Avant
private $temps_cuisson; // en minutes

// Apr√®s (tu veux stocker en secondes)
private $temps_cuisson_secondes;

public function getTempsCuisson() {
    return $this->temps_cuisson_secondes / 60; // Conversion automatique
}
```

Le code qui utilise `getTempsCuisson()` continue de fonctionner sans modification !

---

## üë®‚Äçüç≥ `protected` : pour les recettes de famille

Quand tu veux qu`une propri√©t√© soit **accessible aux classes enfants** mais **pas √† l`ext√©rieur** :

```php
<?php
class Recette {
    protected $nom; // Les enfants peuvent y acc√©der
    protected $temps_cuisson;

    public function __construct($n, $t) {
        $this->nom = $n;
        $this->temps_cuisson = $t;
    }
}

class Dessert extends Recette {
    private $sucre_grammes;

    public function __construct($n, $t, $sucre) {
        parent::__construct($n, $t);
        $this->sucre_grammes = $sucre;
    }

    public function afficherInfo() {
        // ‚úÖ Je peux acc√©der √† nom et temps_cuisson car ils sont protected
        echo "Dessert : " . $this->nom . " (" . $this->temps_cuisson . " min, ";
        echo $this->sucre_grammes . "g de sucre)<br>";
    }
}

$dessert = new Dessert("Tiramisu", 20, 100);
$dessert->afficherInfo();

// ‚ùå Mais de l'ext√©rieur, on ne peut pas y acc√©der
// echo $dessert->nom; // ERREUR !
?>
```

---

### üì∫ R√©sultat :

```
Dessert : Tiramisu (20 min, 100g de sucre)
```

**`protected` = acc√®s familial (parent + enfants) mais pas public !**

C`est comme les recettes de famille : seuls les membres de la famille y ont acc√®s ! üë®‚Äçüë©‚Äçüëß‚Äçüë¶

---

## üìä Tableau r√©capitulatif

| Visibilit√© | Classe elle-m√™me | Classes enfants | Ext√©rieur |
|------------|------------------|-----------------|-----------|
| **`public`** | ‚úÖ Oui | ‚úÖ Oui | ‚úÖ Oui |
| **`protected`** | ‚úÖ Oui | ‚úÖ Oui | ‚ùå Non |
| **`private`** | ‚úÖ Oui | ‚ùå Non | ‚ùå Non |

---

## ‚úçÔ∏è EXERCICE PRATIQUE (le dernier !)

Cr√©e un fichier `exercice_encapsulation.php` et fais ceci :

### Instructions :

1. Cr√©e une classe `StockIngredient` avec :
   - Propri√©t√© **priv√©e** : `$quantite` (en grammes)
   - Constructeur qui initialise la quantit√©
   - M√©thode `getQuantite()` pour lire la quantit√©
   - M√©thode `ajouter($grammes)` qui ajoute des grammes (seulement si grammes > 0)
   - M√©thode `retirer($grammes)` qui retire des grammes (seulement si assez en stock)
   - M√©thode `afficherStock()` qui affiche la quantit√©

2. Cr√©e un stock de farine avec 1000g

3. Teste :
   - Ajouter 500g
   - Retirer 300g
   - Essayer de retirer 2000g (√ßa doit √™tre refus√©)
   - Essayer d`ajouter -100g (√ßa doit √™tre refus√©)

---

### R√©sultat attendu :

```
Stock actuel : 1000g
‚úÖ Ajout de 500g effectu√©
Stock actuel : 1500g
‚úÖ Retrait de 300g effectu√©
Stock actuel : 1200g
‚ö†Ô∏è ERREUR : Stock insuffisant !
Stock actuel : 1200g
‚ö†Ô∏è ERREUR : La quantit√© doit √™tre positive !
Stock actuel : 1200g
```

---

<details>
<summary>üìù Voir la solution (clique pour d√©plier)</summary>

```php
<?php
class StockIngredient {
    private $quantite;

    public function __construct($quantite_initiale) {
        $this->quantite = $quantite_initiale;
    }

    public function getQuantite() {
        return $this->quantite;
    }

    public function ajouter($grammes) {
        if ($grammes <= 0) {
            echo "‚ö†Ô∏è ERREUR : La quantit√© doit √™tre positive !<br>";
            return;
        }
        $this->quantite += $grammes;
        echo "‚úÖ Ajout de " . $grammes . "g effectu√©<br>";
    }

    public function retirer($grammes) {
        if ($grammes > $this->quantite) {
            echo "‚ö†Ô∏è ERREUR : Stock insuffisant !<br>";
            return;
        }
        $this->quantite -= $grammes;
        echo "‚úÖ Retrait de " . $grammes . "g effectu√©<br>";
    }

    public function afficherStock() {
        echo "Stock actuel : " . $this->quantite . "g<br>";
    }
}

$farine = new StockIngredient(1000);
$farine->afficherStock();

$farine->ajouter(500);
$farine->afficherStock();

$farine->retirer(300);
$farine->afficherStock();

$farine->retirer(2000);
$farine->afficherStock();

$farine->ajouter(-100);
$farine->afficherStock();
?>
```

</details>

---

## üß† Ce que tu DOIS retenir de ce cours

‚úÖ **`public`** = Accessible partout (utilise avec prudence)

‚úÖ **`private`** = Accessible seulement dans la classe (protection maximale)

‚úÖ **`protected`** = Accessible dans la classe + les enfants (recettes de famille)

‚úÖ **GETTER** = M√©thode pour **LIRE** une propri√©t√© priv√©e (`getNom()`)

‚úÖ **SETTER** = M√©thode pour **MODIFIER** une propri√©t√© priv√©e avec contr√¥le (`setNom($n)`)

‚úÖ **L`encapsulation prot√®ge les donn√©es et √©vite les erreurs**

---

## üéì R√©capitulatif de TOUTE la formation POO

**Cours 01** : Comprendre classe vs objet ‚Üí Fiche recette vs plat pr√©par√©  
**Cours 02** : Cr√©er ses premi√®res recettes ‚Üí `new`, propri√©t√©s, `->`  
**Cours 03** : Ajouter des actions ‚Üí M√©thodes, `$this`  
**Cours 04** : Simplifier la cr√©ation ‚Üí Constructeur `__construct`  
**Cours 05** : R√©utiliser du code ‚Üí H√©ritage `extends`, `parent::`  
**Cours 06** : Prot√©ger ses recettes ‚Üí `private`, getters/setters  

**TU AS MAINTENANT LES BASES SOLIDES DE LA POO !** üéâ

---

## üöÄ Et maintenant ?

Tu peux maintenant :

‚úÖ Cr√©er tes propres classes de recettes  
‚úÖ Organiser ton code proprement  
‚úÖ R√©utiliser du code avec l`h√©ritage  
‚úÖ Prot√©ger tes donn√©es  
‚úÖ Lire et comprendre du code orient√© objet  

**Prochaines √©tapes possibles :**
- Cr√©er un mini-projet (gestion de restaurant, livre de recettes, gestion de stock...)
- Apprendre les concepts avanc√©s (interfaces, traits, namespaces...)
- D√©couvrir les frameworks PHP (Laravel, Symfony...) qui utilisent MASSIVEMENT la POO

---

## üí™ Conseil final

La POO, c`est comme la cuisine :

**Au d√©but**, √ßa semble compliqu√© et abstrait.  
**Avec la pratique**, √ßa devient naturel et logique.  
**Avec l`exp√©rience**, tu te demandes comment tu faisais avant !

**Continue √† pratiquer, cr√©e des projets, fais des erreurs, corrige-les !**

C`est en **CODANT** qu`on devient d√©veloppeur, pas en lisant ! üíª

---

**üë®‚Äçüç≥ BRAVO pour avoir termin√© cette formation !**

**Tu es maintenant un chef du code qui sait cr√©er des applications solides et bien organis√©es !** üèÜ

*PS : Garde ces cours comme r√©f√©rence. Relis-les quand tu as un doute. Et surtout... CODE, CODE, CODE ! üî•*

*PPS : N`oublie pas : les meilleures recettes sont celles qu`on partage. Partage ton code, aide les autres, et continue d`apprendre ! üç≥*