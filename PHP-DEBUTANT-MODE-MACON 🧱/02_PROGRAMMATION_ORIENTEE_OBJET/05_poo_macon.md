# üß± POO pour Ma√ßons - Cours 05 : L'h√©ritage (le fils h√©rite du p√®re !)

## üë∑ Salut le b√¢tisseur !

Aujourd'hui, on attaque un concept **SUPER PUISSANT** : **l'h√©ritage** !

C'est un peu comme dans la vraie vie :
- Un **fils** h√©rite des comp√©tences de son **p√®re**
- Mais il peut aussi apprendre **ses propres comp√©tences** en plus !

En POO, c'est pareil ! üí™

---

## ü§î L'h√©ritage, c'est quoi ?

Imagine que tu as cr√©√© une classe `Mur` qui marche super bien.

Maintenant, tu veux cr√©er une classe `MurPorteur` (un mur qui supporte le poids de la maison).

Un mur porteur, c'est quoi ? **C'est un mur... MAIS EN MIEUX !**

Il a :
- ‚úÖ Tout ce qu'un mur normal a (hauteur, largeur, mat√©riau...)
- ‚úÖ **PLUS** des trucs en plus (√©paisseur, charge support√©e...)

**Plut√¥t que de TOUT r√©√©crire**, tu peux dire :

> *"MurPorteur, tu h√©rites de Mur, et tu ajoutes juste ce qui te manque !"*

**C'est √ßa l'h√©ritage !** ‚ú®

---

## üèóÔ∏è Exemple concret sur un chantier

### Classe de base : Mur

```php
<?php
class Mur {
    public $hauteur;
    public $largeur;
    public $materiaux;

    public function __construct($h, $l, $m) {
        $this->hauteur = $h;
        $this->largeur = $l;
        $this->materiaux = $m;
    }

    public function calculerSurface() {
        return $this->hauteur * $this->largeur;
    }

    public function afficherInfo() {
        echo "Mur : " . $this->hauteur . "m √ó " . $this->largeur . "m en " . $this->materiaux . "<br>";
    }
}
?>
```

Bon, √ßa tu connais d√©j√† ! C'est un mur classique.

---

### Classe enfant : MurPorteur (qui H√âRITE de Mur)

```php
<?php
class MurPorteur extends Mur {
    public $epaisseur;
    public $charge_max;

    public function __construct($h, $l, $m, $ep, $ch) {
        // J'appelle le constructeur du parent
        parent::__construct($h, $l, $m);
        
        // J'ajoute mes propres propri√©t√©s
        $this->epaisseur = $ep;
        $this->charge_max = $ch;
    }

    public function afficherInfoComplete() {
        echo "=== MUR PORTEUR ===<br>";
        echo "Dimensions : " . $this->hauteur . "m √ó " . $this->largeur . "m<br>";
        echo "Mat√©riau : " . $this->materiaux . "<br>";
        echo "√âpaisseur : " . $this->epaisseur . "m<br>";
        echo "Charge max : " . $this->charge_max . " tonnes<br>";
        echo "Surface : " . $this->calculerSurface() . " m¬≤<br>";
        echo "===================<br><br>";
    }
}

// Utilisation
$mur_normal = new Mur(2.5, 4, "brique");
$mur_normal->afficherInfo();

$mur_porteur = new MurPorteur(3, 5, "b√©ton arm√©", 0.3, 50);
$mur_porteur->afficherInfoComplete();
?>
```

---

### üì∫ R√©sultat :

```
Mur : 2.5m √ó 4m en brique
=== MUR PORTEUR ===
Dimensions : 3m √ó 5m
Mat√©riau : b√©ton arm√©
√âpaisseur : 0.3m
Charge max : 50 tonnes
Surface : 15 m¬≤
===================
```

**Regarde !** Le `MurPorteur` peut utiliser `calculerSurface()` alors qu'on ne l'a **PAS** r√©√©crit !

**Il l'a h√©rit√© de son parent `Mur` !** üéâ

---

## üîç D√©cortiquons le code (ligne par ligne)

### La d√©claration de la classe enfant :

```php
class MurPorteur extends Mur {
```

**`class MurPorteur`** ‚Üí Je cr√©e une nouvelle classe qui s'appelle `MurPorteur`

**`extends`** ‚Üí **LE MOT MAGIQUE !** √áa veut dire **"h√©rite de"**

**`Mur`** ‚Üí Le nom de la classe **parent** (celle dont on h√©rite)

**Traduction :** *"La classe MurPorteur h√©rite de la classe Mur"*

---

### Les nouvelles propri√©t√©s :

```php
    public $epaisseur;
    public $charge_max;
```

Ce sont des propri√©t√©s **EN PLUS** de celles h√©rit√©es.

`MurPorteur` a maintenant :
- ‚úÖ `$hauteur` (h√©rit√©)
- ‚úÖ `$largeur` (h√©rit√©)
- ‚úÖ `$materiaux` (h√©rit√©)
- ‚úÖ `$epaisseur` (nouveau !)
- ‚úÖ `$charge_max` (nouveau !)

---

### Le constructeur de l'enfant :

```php
    public function __construct($h, $l, $m, $ep, $ch) {
        parent::__construct($h, $l, $m);
        
        $this->epaisseur = $ep;
        $this->charge_max = $ch;
    }
```

**`parent::__construct($h, $l, $m);`** ‚Üí **SUPER IMPORTANT !**

**`parent::`** veut dire : *"Appelle le constructeur de mon PARENT"*

√áa permet de remplir les propri√©t√©s h√©rit√©es (hauteur, largeur, mat√©riau).

Ensuite, on remplit nos **propres** propri√©t√©s (√©paisseur, charge_max).

---

## üß† Sch√©ma de l'h√©ritage

```
        Mur (classe PARENT)
         |
         | h√©rite avec "extends"
         |
         v
    MurPorteur (classe ENFANT)
```

**MurPorteur** a :
- Tout ce que `Mur` a
- PLUS ses propres trucs

---

## üí™ Ce que l'enfant peut faire

### 1Ô∏è‚É£ Utiliser les m√©thodes du parent

```php
$mur_porteur = new MurPorteur(3, 5, "b√©ton", 0.3, 50);

// calculerSurface() vient du parent !
echo $mur_porteur->calculerSurface(); // 15
```

**M√™me si on n'a PAS √©crit `calculerSurface()` dans `MurPorteur`, √ßa marche !**

Parce qu'il l'a **h√©rit√©** ! ‚ú®

---

### 2Ô∏è‚É£ Ajouter ses propres m√©thodes

```php
class MurPorteur extends Mur {
    // ... propri√©t√©s et constructeur ...

    // Nouvelle m√©thode sp√©cifique au mur porteur
    public function verifierSolidite($poids) {
        if ($poids > $this->charge_max) {
            echo "‚ö†Ô∏è DANGER ! Le mur ne peut pas supporter " . $poids . " tonnes !<br>";
        } else {
            echo "‚úÖ OK, le mur peut supporter " . $poids . " tonnes.<br>";
        }
    }
}

$mur_porteur = new MurPorteur(3, 5, "b√©ton", 0.3, 50);
$mur_porteur->verifierSolidite(45); // ‚úÖ OK
$mur_porteur->verifierSolidite(60); // ‚ö†Ô∏è DANGER
```

---

### 3Ô∏è‚É£ Modifier (surcharger) une m√©thode du parent

Tu peux **R√â√âCRIRE** une m√©thode du parent pour l'adapter.

```php
<?php
class Mur {
    public $hauteur;
    public $largeur;
    public $materiaux;

    public function __construct($h, $l, $m) {
        $this->hauteur = $h;
        $this->largeur = $l;
        $this->materiaux = $m;
    }

    public function afficherInfo() {
        echo "Mur simple : " . $this->hauteur . "m √ó " . $this->largeur . "m<br>";
    }
}

class MurPorteur extends Mur {
    public $epaisseur;
    public $charge_max;

    public function __construct($h, $l, $m, $ep, $ch) {
        parent::__construct($h, $l, $m);
        $this->epaisseur = $ep;
        $this->charge_max = $ch;
    }

    // Je R√â√âCRIS la m√©thode afficherInfo()
    public function afficherInfo() {
        echo "Mur PORTEUR : " . $this->hauteur . "m √ó " . $this->largeur . "m, ";
        echo "√©paisseur " . $this->epaisseur . "m, charge " . $this->charge_max . "t<br>";
    }
}

$mur1 = new Mur(2.5, 4, "brique");
$mur1->afficherInfo();

$mur2 = new MurPorteur(3, 5, "b√©ton", 0.3, 50);
$mur2->afficherInfo();
?>
```

---

### üì∫ R√©sultat :

```
Mur simple : 2.5m √ó 4m
Mur PORTEUR : 3m √ó 5m, √©paisseur 0.3m, charge 50t
```

**M√™me nom de m√©thode, mais comportement diff√©rent !**

C'est ce qu'on appelle la **surcharge** (ou **override** en anglais).

---

## üî• Exemple complet avec plusieurs niveaux

Tu peux m√™me avoir des **h√©ritages en cha√Æne** !

```php
<?php
// Niveau 1 : Classe de base
class Mur {
    public $hauteur;
    public $largeur;

    public function __construct($h, $l) {
        $this->hauteur = $h;
        $this->largeur = $l;
    }

    public function calculerSurface() {
        return $this->hauteur * $this->largeur;
    }
}

// Niveau 2 : MurPorteur h√©rite de Mur
class MurPorteur extends Mur {
    public $charge_max;

    public function __construct($h, $l, $ch) {
        parent::__construct($h, $l);
        $this->charge_max = $ch;
    }
}

// Niveau 3 : MurRenforce h√©rite de MurPorteur
class MurRenforce extends MurPorteur {
    public $materiau_renfort;

    public function __construct($h, $l, $ch, $renf) {
        parent::__construct($h, $l, $ch);
        $this->materiau_renfort = $renf;
    }

    public function afficherInfo() {
        echo "Mur renforc√© : " . $this->hauteur . "m √ó " . $this->largeur . "m, ";
        echo "charge " . $this->charge_max . "t, ";
        echo "renforc√© avec " . $this->materiau_renfort . "<br>";
    }
}

$mur = new MurRenforce(3, 5, 100, "fibres de carbone");
$mur->afficherInfo();
echo "Surface : " . $mur->calculerSurface() . " m¬≤<br>";
?>
```

---

### üì∫ R√©sultat :

```
Mur renforc√© : 3m √ó 5m, charge 100t, renforc√© avec fibres de carbone
Surface : 15 m¬≤
```

**`MurRenforce` h√©rite de `MurPorteur` qui h√©rite de `Mur` !**

C'est comme une famille : grand-p√®re ‚Üí p√®re ‚Üí fils ! üë¥üë®üë¶

---

## ‚ö†Ô∏è Ce qu'il faut retenir sur `parent::`

**`parent::`** permet d'appeler une m√©thode du parent.

### Utilisation la plus fr√©quente : dans le constructeur

```php
public function __construct($h, $l, $m, $ep, $ch) {
    parent::__construct($h, $l, $m); // J'appelle le constructeur du parent
    $this->epaisseur = $ep;
    $this->charge_max = $ch;
}
```

**Pourquoi c'est important ?**

Le parent a d√©j√† du code pour initialiser `hauteur`, `largeur`, `materiaux`.  
**Plut√¥t que de TOUT r√©√©crire**, tu appelles le parent et tu compl√®tes !

---

### Autre utilisation : appeler une m√©thode du parent

```php
class MurPorteur extends Mur {
    public function afficherInfo() {
        parent::afficherInfo(); // J'appelle la m√©thode du parent
        echo "Et en plus, charge max : " . $this->charge_max . "t<br>";
    }
}
```

---

## ‚úçÔ∏è EXERCICE PRATIQUE (obligatoire !)

Cr√©e un fichier `exercice_heritage.php` et fais ceci :

### Instructions :

1. Cr√©e une classe `Vehicule` avec :
   - Propri√©t√©s : `marque`, `modele`, `annee`
   - Constructeur
   - M√©thode `afficherInfo()` qui affiche marque, mod√®le et ann√©e

2. Cr√©e une classe `Camion` qui h√©rite de `Vehicule` avec :
   - Propri√©t√© suppl√©mentaire : `capacite_charge` (en tonnes)
   - Constructeur qui utilise `parent::`
   - M√©thode `afficherInfoComplete()` qui affiche tout

3. Cr√©e un camion : Renault Master, 2020, capacit√© 3.5 tonnes

4. Affiche ses infos compl√®tes

---

### R√©sultat attendu :

```
V√©hicule : Renault Master (2020)
Capacit√© de charge : 3.5 tonnes
```

---

<details>
<summary>üìù Voir la solution (clique pour d√©plier)</summary>

```php
<?php
class Vehicule {
    public $marque;
    public $modele;
    public $annee;

    public function __construct($marq, $mod, $an) {
        $this->marque = $marq;
        $this->modele = $mod;
        $this->annee = $an;
    }

    public function afficherInfo() {
        echo "V√©hicule : " . $this->marque . " " . $this->modele . " (" . $this->annee . ")<br>";
    }
}

class Camion extends Vehicule {
    public $capacite_charge;

    public function __construct($marq, $mod, $an, $cap) {
        parent::__construct($marq, $mod, $an);
        $this->capacite_charge = $cap;
    }

    public function afficherInfoComplete() {
        $this->afficherInfo();
        echo "Capacit√© de charge : " . $this->capacite_charge . " tonnes<br>";
    }
}

$camion = new Camion("Renault", "Master", 2020, 3.5);
$camion->afficherInfoComplete();
?>
```

</details>

---

## üß† Ce que tu DOIS retenir de ce cours

‚úÖ **`extends`** ‚Üí Mot magique pour h√©riter d'une classe

‚úÖ **La classe enfant a TOUT ce que le parent a + ses propres trucs**

‚úÖ **`parent::`** ‚Üí Appeler une m√©thode du parent

‚úÖ **`parent::__construct()`** ‚Üí Utiliser le constructeur du parent

‚úÖ **Tu peux r√©√©crire (surcharger) une m√©thode du parent**

‚úÖ **L'h√©ritage √©vite de dupliquer du code**

---

## üìä Sch√©ma r√©capitulatif

```
Mur
‚îú‚îÄ‚îÄ hauteur
‚îú‚îÄ‚îÄ largeur
‚îú‚îÄ‚îÄ materiaux
‚îú‚îÄ‚îÄ __construct()
‚îú‚îÄ‚îÄ calculerSurface()
‚îî‚îÄ‚îÄ afficherInfo()

MurPorteur (extends Mur)
‚îú‚îÄ‚îÄ hauteur (h√©rit√©)
‚îú‚îÄ‚îÄ largeur (h√©rit√©)
‚îú‚îÄ‚îÄ materiaux (h√©rit√©)
‚îú‚îÄ‚îÄ epaisseur (nouveau)
‚îú‚îÄ‚îÄ charge_max (nouveau)
‚îú‚îÄ‚îÄ __construct() (surcharg√©)
‚îú‚îÄ‚îÄ calculerSurface() (h√©rit√©)
‚îú‚îÄ‚îÄ afficherInfo() (peut √™tre surcharg√©)
‚îî‚îÄ‚îÄ verifierSolidite() (nouveau)
```

---

## ‚è≠Ô∏è Dans le prochain cours...

Tu vas apprendre **PUBLIC, PRIVATE, PROTECTED** !

**C'est quoi ?**

Comment **PROT√âGER** les propri√©t√©s de tes classes !

Parfois, tu ne veux PAS que tout le monde puisse modifier directement une propri√©t√©.

Par exemple :
- Un mur porteur ne peut PAS avoir une charge_max n√©gative !
- On doit **contr√¥ler** ce qu'on met dedans !

Tu vas apprendre les **GETTERS** et **SETTERS** pour contr√¥ler l'acc√®s aux propri√©t√©s ! üîí

---

Mais pour l'instant, **FAIS L'EXERCICE** !

L'h√©ritage est un concept **fondamental** en POO. Tu vas l'utiliser **tout le temps** !

---

**üë∑ Bravo, tu ma√Ætrises de mieux en mieux la POO !**

*PS : L'h√©ritage, c'est comme les outils : plus tu t'en sers, plus tu comprends son utilit√© ! üîß*